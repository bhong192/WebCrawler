<!doctype html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-site-verification" content="VsVvSTVAouAluNodWeR30BeIWTr4c84HvN4Fn9WBsak"> <!-- wp_head --> <!-- This site is optimized with the Yoast SEO plugin v15.5 - https://yoast.com/wordpress/plugins/seo/ -->
  <title>Java - How to update the value of a key in HashMap - Mkyong.com</title>
  <meta name="description" content="This article shows a few ways to update or increase a value of a key in a HashMap, updated with Java 8 examples using compute, merge, computeIfPresent, computeIfAbsent, etc.">
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <meta property="og:locale" content="en_US">
  <meta property="og:type" content="article">
  <meta property="og:title" content="Java - How to update the value of a key in HashMap - Mkyong.com">
  <meta property="og:description" content="This article shows a few ways to update or increase a value of a key in a HashMap, updated with Java 8 examples using compute, merge, computeIfPresent, computeIfAbsent, etc.">
  <meta property="og:url" content="https://mkyong.com/java/java-how-to-update-the-value-of-a-key-in-hashmap/">
  <meta property="og:site_name" content="Mkyong.com">
  <meta property="article:published_time" content="2021-03-02T06:20:28+00:00">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:label1" content="Written by">
  <meta name="twitter:data1" content="mkyong">
  <meta name="twitter:label2" content="Est. reading time">
  <meta name="twitter:data2" content="5 minutes">  <!-- / Yoast SEO plugin. -->  
 </head>
 <body>
  <div class="container-fluid">
   <div class="row"> <!-- left -->
    <div id="sidebar-left" class="col-12 col-lg-3 col-xl-2"> <!-- sidebar-left-menu, see functions.php-->
     <div class="offcanvas offcanvas-start" tabindex="-1" id="left-nav" aria-labelledby="left-nav">
      <div class="offcanvas-header">
       <h5 class="offcanvas-title">Main Tutorials</h5>
      </div>
      <div class="offcanvas-body sidebar-left-no-highlight">
       <div>
        <ul>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
        </ul>
       </div>
      </div>
     </div> <!-- ads -->
     <div class="ads-container-sticky d-none d-lg-block">
      <div class="ads-container">
       <div align="center" data-freestar-ad="__160x600" id="mkyong_rail_left">  
       </div>
      </div>
     </div>
    </div> <!-- middle -->
    <main id="main-middle" role="main" class="col-12 col-lg-9 col-xl-7">
     <article id="main-content" class="dont-break-out">
      <div id="title-container">
       <h1>Java – How to update the value of a key in HashMap</h1>
       <div class="post-meta d-flex align-items-center position-relative">
        <div></div>
        <div>
         <p><small class="extra-info">By  | <time datetime="2021-03-02T14:20:28+08:00"> Last updated: March 2, 2021</time></small></p>
         <p><small class="extra-info">Viewed: 12,585 (+872 pv/w)</small></p>
         <p><small class="extra-info"></small></p>
         <div class="post-tag">
          <small class="extra-info">Tags: |  |  |  | </small>
         </div>
         <p></p>
        </div>
       </div>
      </div>
      <p>This article shows a few ways to update or increase a value of a key in a HashMap.</p>
      <p>Table of contents</p>
      <ul class="list-toc">
       <li></li>
       <li></li>
       <li></li>
       <li>
        <ul>
         <li></li>
         <li></li>
        </ul></li>
       <li></li>
       <li></li>
       <li></li>
      </ul>
      <h2 id="update-the-value-of-a-key-in-hashmap"> 1. Update the value of a key in HashMap<br></h2>
      <p>If the key doesn’t exist, the <code>put</code> method creates the key with the associated value; If the key exists, the <code>put</code> updates its value.</p>
      <pre><code class="language-java">
  Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();
  map.put("a", 1);
  System.out.println(map.get("a"));   // 1

  map.put("a", 2);                    // key `a` exists, update or replace the value
  System.out.println(map.get("a"));   // 2
</code></pre>
      <p>Output</p>
      <div class="filename">
       Terminal
      </div>
      <pre><code class="language-bash">
1
2
</code></pre>
      <div class="ads-container ads-container-video">
       <div id="mkyongFreeStarVideoAdContainer">
        <div id="freestar-video-parent">
         <div id="freestar-video-child"></div>
        </div>
       </div>
      </div>
      <h2 id="increase-the-value-of-a-key-in-hashmap"> 2. Increase the value of a key in HashMap<br></h2>
      <p>2.1 We can update or increase the value of a key with the below <code>get() + 1</code> method.</p>
      <pre><code class="language-java">
  Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();
  // if key doesn't exist, throws NullPointerException
  map.put("count", map.get("count") + 1);
</code></pre>
      <p>Output</p>
      <div class="filename">
       Terminal
      </div>
      <pre><code class="language-bash">
Exception in thread "main" java.lang.NullPointerException:
  Cannot invoke "java.lang.Integer.intValue()"
  because the return value of "java.util.Map.get(Object)" is null
</code></pre>
      <p>2.2 However, the above method will throw a <code>NullPointerException</code> if the key doesn’t exist. The fixed is uses the <code>containsKey()</code> to ensure the key exists before update the key’s value.</p>
      <pre><code class="language-java">
  Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();

  for (int i = 0; i &lt; 10; i++) {
      if (map.containsKey("count")) {
          map.put("count", map.get("count") + 1);
      } else {
          map.put("count", 1);
      }
  }

  System.out.println(map.get("count"));
</code></pre>
      <p>Output</p>
      <div class="filename">
       Terminal
      </div>
      <pre><code class="language-bash">
10
</code></pre>
      <p>Or one liner like the below method.</p>
      <pre><code class="language-java">
  map.put("count", map.containsKey("count") ? map.get("count") + 1 : 1);
</code></pre>
      <h2 id="java-8-getordefault"> 3. Java 8 getOrDefault()<br></h2>
      <p>In Java 8, we can use <code>getOrDefault</code> to provide a default value for a non-exists key.</p>
      <pre><code class="language-java">
  Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();
  for (int i = 0; i &lt; 10; i++) {
      // if key "count" doesn't exist, default to 0
      map.put("count", map.getOrDefault("count", 0) + 1);
  }
  System.out.println(map.get("count"));
</code></pre>
      <p>Output</p>
      <div class="filename">
       Terminal
      </div>
      <pre><code class="language-bash">
10
</code></pre>
      <h2 id="java-8-compute-and-merge"> 4. Java 8 compute and merge<br></h2>
      <p>Java 8 also added <code>compute()</code> and <code>merge()</code> to enhance the <code>Map</code> interface. The below examples increase the value of a key in <code>HashMap</code>.</p>
      <div class="note">
       <p><strong>Further Reading</strong><br> Most of the new Java 8 Map APIs accept either a <code>Function</code> and a <code>BiFunction</code> as the argument, ensure you understand the concept of the following function interfaces:</p>
       <ul>
        <li></li>
        <li></li>
       </ul>
      </div>
      <h3 id="java-8-merge-example"> 4.1 Java 8 merge example<br></h3>
      <p>For <code>merge()</code>, the first argument is the Map’s key, the second argument is the default value, the third argument is a <code>BiFunction</code> to accept two arguments and provide an output for the key.</p>
      <pre><code class="language-java">
  Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();
  for (int i = 0; i &lt; 10; i++) {
      // if key doesn't exist, default to 1
      // lambda
      map.merge("count", 1, (v1, v2) -&gt; v1 + v2);
  }
  System.out.println(map.get("count"));
</code></pre>
      <p>Output</p>
      <div class="filename">
       Terminal
      </div>
      <pre><code class="language-bash">
10
</code></pre>
      <p>We can simplify the lambda with method reference.</p>
      <pre><code class="language-java">
  Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();
  for (int i = 0; i &lt; 10; i++) {
      map.merge("count", 1, Integer::sum);
  }
  System.out.println(map.get("count"));
</code></pre>
      <h3 id="java-8-compute"> 4.2 Java 8 compute<br></h3>
      <p>This <code>compute</code> is similar to the <code>merge</code>; the first argument is the Map’s key, and the second argument is a <code>BiFunction</code>.</p>
      <pre><code class="language-java">
  Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();
  for (int i = 0; i &lt; 10; i++) {
      map.compute("count", (k, v) -&gt; (v == null) ? 1 : v + 1);
  }
  System.out.println(map.get("count"));
</code></pre>
      <p>Output</p>
      <div class="filename">
       Terminal
      </div>
      <pre><code class="language-bash">
10
</code></pre>
      <p>Yet another Java 8 <code>compute</code> example to increase the key’s value.</p>
      <div class="filename">
       TestMap.java
      </div>
      <pre><code class="language-java">
package com.mkyong.basic;

import java.util.HashMap;
import java.util.Map;

public class TestMap {

    public static void main(String[] args) {

        Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();
        for (int i = 0; i &lt; 10; i++) {
            // lambda
            //map.compute("count", (k, v) -&gt; createDefault(k, v));

            // method reference
            map.compute("count", TestMap::createDefault);
        }
        System.out.println(map.get("count"));

    }

    private static Integer createDefault(String key, Integer value) {

        if (value == null) {
            return 1;
        }

        return value + 1;
    }

}  
</code></pre>
      <p>Output</p>
      <div class="filename">
       Terminal
      </div>
      <pre><code class="language-bash">
10
</code></pre>
      <h2 id="java-8-computeifpresent"> 5. Java 8 computeIfPresent<br></h2>
      <p>The <code>computeIfPresent</code> is similar to the <code>compute</code> but runs the compute method only if the key is present or exists.</p>
      <p>5.1 The below <code>computeIfPresent</code> example will print a <code>null</code>.</p>
      <pre><code class="language-java">
  Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();
  for (int i = 0; i &lt; 10; i++) {
      // key count not exists, skip x 10
      map.computeIfPresent("count", (k,v) -&gt; v + 1);
  }
  System.out.println(map.get("count"));
</code></pre>
      <p>Output</p>
      <div class="filename">
       Terminal
      </div>
      <pre><code class="language-bash">
null
</code></pre>
      <p>5.2 The below <code>computeIfPresent</code> example will print a <code>10</code>.</p>
      <pre><code class="language-java">
  Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();
  map.put("count", 0);
  for (int i = 0; i &lt; 10; i++) {
      // key exists, ok, run this
      map.computeIfPresent("count", (k, v) -&gt; v + 1);
  }
  System.out.println(map.get("count"));
</code></pre>
      <p>Output</p>
      <div class="filename">
       Terminal
      </div>
      <pre><code class="language-bash">
10
</code></pre>
      <h2 id="java-8-computeifabsent-and-putifabsent"> 6. Java 8 computeIfAbsent and putIfAbsent<br></h2>
      <p>6.1 The <code>computeIfAbsent</code> is similar to the <code>computeIfPresent</code>, but runs the compute method only if the key is NOT present or exists.</p>
      <div class="filename">
       TestMap.java
      </div>
      <pre><code class="language-java">
package com.mkyong.basic;

import java.util.HashMap;
import java.util.Map;

public class TestMap {

  public static void main(String[] args) {

      Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();
      for (int i = 0; i &lt; 10; i++) {
          // run once only, if key doesn't exists, else skip this.
          map.computeIfAbsent("count", TestMap::createDefault);
      }
      System.out.println(map.get("count"));

  }

  private static Integer createDefault(String key) {
      System.out.println("Creating Default....");
      if ("count".equalsIgnoreCase(key)) {
          return 0;
      } else {
          return -1;
      }
  }

}
</code></pre>
      <p>Output</p>
      <div class="filename">
       Terminal
      </div>
      <pre><code class="language-bash">
Creating Default....
0
</code></pre>
      <p>6.2 The below example uses <code>computeIfAbsent</code> to provide a default value for the key; <code>computeIfPresent</code> to update or increase the key value.</p>
      <pre><code class="language-java">
  Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();
  for (int i = 0; i &lt; 10; i++) {
      map.computeIfAbsent("count", TestMap::createDefault);   // default 0
      map.computeIfPresent("count", (k, v) -&gt; v + 1);         // increase +1
  }
  System.out.println(map.get("count"));
</code></pre>
      <p>Output</p>
      <div class="filename">
       Terminal
      </div>
      <pre><code class="language-bash">
Creating Default....
10
</code></pre>
      <p>6.3 There is also a <code>putIfAbsent</code> to update the value only if the key doesn’t exist.</p>
      <pre><code class="language-java">
  Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();
  for (int i = 0; i &lt; 10; i++) {
      //map.computeIfAbsent("count", TestMap::createDefault);
      map.putIfAbsent("count", 0);
      map.computeIfPresent("count", (k, v) -&gt; v + 1);
  }
  System.out.println(map.get("count"));
</code></pre>
      <p>The difference is <code>computeIfAbsent</code> uses a <code>Function</code> to update the value; the <code>putIfAbsent</code> update the value directly.</p>
      <h2 id="references"> 7. References<br></h2>
      <ul>
       <li></li>
       <li></li>
       <li></li>
       <li></li>
       <li></li>
       <li></li>
       <li></li>
      </ul> <!-- current post ID --> 
      <div class="d-flex justify-content-center ads-container-after-post ads-container"> <!-- Tag ID: mkyong_leaderboard_btf -->
       <div align="center" data-freestar-ad="__320x100 __336x280" id="mkyong_leaderboard_btf">  
       </div>
      </div> <!-- loaded via JS -->
      <div id="mk-afterpost-related"></div> <!-- author -->
      <div id="author-container" class="d-flex align-items-center position-relative">
       <div></div>
       <div>
        <h5></h5>
        <p>Founder of , love Java and open source stuff. Follow him on . If you like my tutorials, consider make a donation to .</p>
        <p></p>
       </div>
      </div> <!-- comments -->
      <h4>Comments</h4>
      <div class="wpdiscuz_top_clearing"></div>
      <div id="comments" class="comments-area">
       <div id="respond" style="width: 0;height: 0;clear: both;margin: 0;padding: 0;"></div>
       <div id="wpdcom" class="wpdiscuz_unauth wpd-default wpd-layout-1 wpd-comments-open">
        <div class="wc_social_plugin_wrapper"></div>
        <div class="wpd-form-wrap">
         <div class="wpd-form-head">
          <div class="wpd-auth">
           <div class="wpd-login"></div>
          </div>
         </div>
         <div class="wpd-form wpd-form-wrapper wpd-main-form-wrapper" id="wpd-main-form-wrapper-0_0"></div>
         <div id="wpdiscuz_hidden_secondary_form" style="display: none;">
          <div class="wpd-form wpd-form-wrapper wpd-secondary-form-wrapper" id="wpd-secondary-form-wrapper-wpdiscuzuniqueid" style="display: none;">
           <div class="wpd-secondary-forms-social-content"></div>
           <div class="clearfix"></div>
          </div>
         </div>
        </div>
        <div id="wpd-threads" class="wpd-thread-wrapper">
         <div class="wpd-thread-head">
          <div class="wpd-thread-info " data-comments-count="0"> <span class="wpdtc" title="0">0</span> Comments
          </div>
          <div class="wpd-space"></div>
          <div class="wpd-thread-filter"></div>
         </div>
         <div class="wpd-comment-info-bar">
          <div class="wpd-current-view">
           <i class="fas fa-quote-left"></i> Inline Feedbacks
          </div>
          <div class="wpd-filter-view-all">
           View all comments
          </div>
         </div>
         <div class="wpd-thread-list">
          <div class="wpdiscuz-comment-pagination"></div>
         </div>
        </div>
       </div>
      </div>
      <div id="wpdiscuz-loading-bar" class="wpdiscuz-loading-bar-unauth"></div>
      <div id="wpdiscuz-comment-message" class="wpdiscuz-comment-message-unauth"></div>
     </article>
    </main> <!-- right -->
    <div id="sidebar-right" class="d-none d-xl-block col-xl-3">
     <div class="ads-container-height1080">
      <div class="ads-container-sticky">
       <div class="ads-container">
        <div align="center" data-freestar-ad="__300x600" id="mkyong_rail_right_1">  
        </div>
       </div>
      </div>
     </div>
     <div class="ads-container-sticky">
      <div class="ads-container">
       <div align="center" data-freestar-ad="__300x600" id="mkyong_rail_right_2">  
       </div>
      </div>
     </div>
    </div>
   </div> <!--/.row -->
  </div> <!--/.container-fluid -->  <!-- Dynamic page generated in 0.084 seconds. --><!-- Cached page generated by WP-Super-Cache on 2021-09-29 23:11:31 --><!-- super cache -->
 </body>
</html>