<!doctype html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-site-verification" content="VsVvSTVAouAluNodWeR30BeIWTr4c84HvN4Fn9WBsak"> <!-- wp_head --> <!-- This site is optimized with the Yoast SEO plugin v15.5 - https://yoast.com/wordpress/plugins/seo/ -->
  <title>Pretty Print XML with Java Dom and XSLT - Mkyong.com</title>
  <meta name="description" content="Java DOM parser and XSLT example to pretty print an XML file.">
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <meta property="og:locale" content="en_US">
  <meta property="og:type" content="article">
  <meta property="og:title" content="Pretty Print XML with Java Dom and XSLT - Mkyong.com">
  <meta property="og:description" content="Java DOM parser and XSLT example to pretty print an XML file.">
  <meta property="og:url" content="https://mkyong.com/java/pretty-print-xml-with-java-dom-and-xslt/">
  <meta property="og:site_name" content="Mkyong.com">
  <meta property="article:published_time" content="2021-02-16T03:25:20+00:00">
  <meta property="article:modified_time" content="2021-05-16T03:38:29+00:00">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:label1" content="Written by">
  <meta name="twitter:data1" content="mkyong">
  <meta name="twitter:label2" content="Est. reading time">
  <meta name="twitter:data2" content="3 minutes">  <!-- / Yoast SEO plugin. -->  
 </head>
 <body>
  <div class="container-fluid">
   <div class="row"> <!-- left -->
    <div id="sidebar-left" class="col-12 col-lg-3 col-xl-2"> <!-- sidebar-left-menu, see functions.php-->
     <div class="offcanvas offcanvas-start" tabindex="-1" id="left-nav" aria-labelledby="left-nav">
      <div class="offcanvas-header">
       <h5 class="offcanvas-title">Java XML Tutorial</h5>
      </div>
      <div class="offcanvas-body sidebar-left-no-highlight">
       <div>
        <ul>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li class="active"></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
        </ul>
       </div>
      </div>
     </div> <!-- ads -->
     <div class="ads-container-sticky d-none d-lg-block">
      <div class="ads-container">
       <div align="center" data-freestar-ad="__160x600" id="mkyong_rail_left">  
       </div>
      </div>
     </div>
    </div> <!-- middle -->
    <main id="main-middle" role="main" class="col-12 col-lg-9 col-xl-7">
     <article id="main-content" class="dont-break-out">
      <div id="title-container">
       <h1>Pretty Print XML with Java Dom and XSLT</h1>
       <div class="post-meta d-flex align-items-center position-relative">
        <div></div>
        <div>
         <p><small class="extra-info">By  | <time datetime="2021-05-16T11:38:29+08:00"> Last updated: May 16, 2021</time></small></p>
         <p><small class="extra-info">Viewed: 4,329 (+202 pv/w)</small></p>
         <p><small class="extra-info"></small></p>
         <div class="post-tag">
          <small class="extra-info">Tags: |  |  |  |  | </small>
         </div>
         <p></p>
        </div>
       </div>
      </div>
      <div class="pre-next-container d-flex justify-content-between"></div>
      <p>This article shows how to use Java  +  to format or pretty print a XML document.</p>
      <p>Table of contents</p>
      <ul class="list-toc">
       <li></li>
       <li></li>
       <li></li>
       <li></li>
       <li></li>
      </ul>
      <p><em>P.S Tested with Java 11</em></p>
      <h2 id="an-xml-file"> 1. An XML file<br></h2>
      <div class="filename">
       staff-simple.xml
      </div>
      <pre><code class="language-xml">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;company&gt;
    &lt;staff id="1001"&gt;
        &lt;name&gt;mkyong&lt;/name&gt;
        &lt;role&gt;support&lt;/role&gt;
    &lt;/staff&gt;
    &lt;staff id="1002"&gt;
        &lt;name&gt;yflow&lt;/name&gt;
        &lt;role&gt;admin&lt;/role&gt;
    &lt;/staff&gt;
&lt;/company&gt;
</code></pre>
      <div class="ads-container ads-container-video">
       <div id="mkyongFreeStarVideoAdContainer">
        <div id="freestar-video-parent">
         <div id="freestar-video-child"></div>
        </div>
       </div>
      </div>
      <h2 id="pretty-print-xml-via-transformer"> 2. Pretty Print XML via Transformer<br></h2>
      <p>In <code>javax.xml.transform.Transformer</code>, we can configure the <code>OutputKeys.INDENT</code> property to pretty print the XML documents.</p>
      <pre><code class="language-java">
  private static void transform(Document doc, OutputStream output)
          throws TransformerException {

      TransformerFactory transformerFactory = TransformerFactory.newInstance();
      Transformer transformer = transformerFactory.newTransformer();

      // pretty print
      transformer.setOutputProperty(OutputKeys.INDENT, "yes");

      transformer.transform(new DOMSource(doc), new StreamResult(output));

  }
</code></pre>
      <p>Output</p>
      <div class="filename">
       Terminal
      </div>
      <pre><code class="language-bash">
&lt;?xml version="1.0" encoding="utf-8" standalone="no"?&gt;
&lt;company&gt;

  &lt;staff id="1001"&gt;

      &lt;name&gt;mkyong&lt;/name&gt;

      &lt;role&gt;support&lt;/role&gt;

  &lt;/staff&gt;

  &lt;staff id="1002"&gt;

      &lt;name&gt;yflow&lt;/name&gt;

      &lt;role&gt;admin&lt;/role&gt;

  &lt;/staff&gt;

&lt;/company&gt;
</code></pre>
      <p>However, the <code>Transformer</code> will add many empty newlines (tested in Java 11) in the output, Not sure why?</p>
      <h2 id="pretty-print-xml-via-xslt"> 3. Pretty Print XML via XSLT<br></h2>
      <p>3.1 To solve the above extra empty newlines problem, we can add an <code>xslt</code> file for the pretty print transformation.</p>
      <div class="filename">
       staff-format.xslt
      </div>
      <pre><code class="language-xml">
&lt;xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;
    &lt;xsl:output indent="yes" cdata-section-elements="cdata-other-elements"/&gt;
    &lt;xsl:strip-space elements="*"/&gt;

    &lt;xsl:template match="@*|node()"&gt;
        &lt;xsl:copy&gt;
            &lt;xsl:apply-templates select="@*|node()"/&gt;
        &lt;/xsl:copy&gt;
    &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre>
      <p>3.2 DOM parser example for the XSLT transformation.</p>
      <div class="filename">
       XsltPrettyPrintDomParser.java
      </div>
      <pre><code class="language-java">
package com.mkyong.xml.dom.xslt;

import org.w3c.dom.Document;
import org.xml.sax.SAXException;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.transform.OutputKeys;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;
import javax.xml.transform.stream.StreamSource;
import java.io.*;

public class XsltPrettyPrintDomParser {

  private static final String XML_FILENAME
                          = "src/main/resources/staff-simple.xml";
  private static final String XSLT_FILENAME
                          = "src/main/resources/xslt/staff-format.xslt";

  public static void main(String[] args) {

      DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();

      try (InputStream is = new FileInputStream(XML_FILENAME)) {

          DocumentBuilder db = dbf.newDocumentBuilder();

          Document doc = db.parse(is);

          transform(doc, System.out);


      } catch (IOException | ParserConfigurationException |
              SAXException | TransformerException e) {
          e.printStackTrace();
      }

  }

  private static void transform(Document doc, OutputStream output)
          throws TransformerException {

      TransformerFactory transformerFactory = TransformerFactory.newInstance();

      //Transformer transformer = transformerFactory.newTransformer();

      // add XSLT for pretty print
      Transformer transformer = transformerFactory.newTransformer(
              new StreamSource(new File(XSLT_FILENAME)));

      // pretty print, this will add extra new lines
      // transformer.setOutputProperty(OutputKeys.INDENT, "yes");

      // add extra standalone to break the root node to a new line
      transformer.setOutputProperty(OutputKeys.STANDALONE, "no");

      transformer.transform(new DOMSource(doc), new StreamResult(output));

  }

}
</code></pre>
      <p>Output</p>
      <div class="filename">
       Terminal
      </div>
      <pre><code class="language-bash">
&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;
&lt;company&gt;
  &lt;staff id="1001"&gt;
      &lt;name&gt;mkyong&lt;/name&gt;
      &lt;role&gt;support&lt;/role&gt;
  &lt;/staff&gt;
  &lt;staff id="1002"&gt;
      &lt;name&gt;yflow&lt;/name&gt;
      &lt;role&gt;admin&lt;/role&gt;
  &lt;/staff&gt;
&lt;/company&gt;
</code></pre>
      <h2 id="download-source-code"> 4. Download Source Code<br></h2>
      <div class="github">
       <p>$ git clone </p>
       <p>$ cd java-xml</p>
       <p>$ cd src/main/java/com/mkyong/xml/dom/xslt/</p>
      </div>
      <h2 id="references"> 5. References<br></h2>
      <ul>
       <li></li>
       <li></li>
       <li></li>
       <li></li>
       <li></li>
       <li></li>
       <li></li>
      </ul>
      <div class="pre-next-container d-flex justify-content-between"></div> <!-- current post ID --> 
      <div class="d-flex justify-content-center ads-container-after-post ads-container"> <!-- Tag ID: mkyong_leaderboard_btf -->
       <div align="center" data-freestar-ad="__320x100 __336x280" id="mkyong_leaderboard_btf">  
       </div>
      </div> <!-- loaded via JS -->
      <div id="mk-afterpost-related"></div> <!-- author -->
      <div id="author-container" class="d-flex align-items-center position-relative">
       <div></div>
       <div>
        <h5></h5>
        <p>Founder of , love Java and open source stuff. Follow him on . If you like my tutorials, consider make a donation to .</p>
        <p></p>
       </div>
      </div> <!-- comments -->
      <h4>Comments</h4>
      <div class="wpdiscuz_top_clearing"></div>
      <div id="comments" class="comments-area">
       <div id="respond" style="width: 0;height: 0;clear: both;margin: 0;padding: 0;"></div>
       <div id="wpdcom" class="wpdiscuz_unauth wpd-default wpd-layout-1 wpd-comments-open">
        <div class="wc_social_plugin_wrapper"></div>
        <div class="wpd-form-wrap">
         <div class="wpd-form-head">
          <div class="wpd-auth">
           <div class="wpd-login"></div>
          </div>
         </div>
         <div class="wpd-form wpd-form-wrapper wpd-main-form-wrapper" id="wpd-main-form-wrapper-0_0"></div>
         <div id="wpdiscuz_hidden_secondary_form" style="display: none;">
          <div class="wpd-form wpd-form-wrapper wpd-secondary-form-wrapper" id="wpd-secondary-form-wrapper-wpdiscuzuniqueid" style="display: none;">
           <div class="wpd-secondary-forms-social-content"></div>
           <div class="clearfix"></div>
          </div>
         </div>
        </div>
        <div id="wpd-threads" class="wpd-thread-wrapper">
         <div class="wpd-thread-head">
          <div class="wpd-thread-info " data-comments-count="1"> <span class="wpdtc" title="1">1</span> Comment
          </div>
          <div class="wpd-space"></div>
          <div class="wpd-thread-filter">
           <div class="wpd-filter wpdf-sorting"> <span class="wpdiscuz-sort-button wpdiscuz-vote-sort-up wpdiscuz-sort-button-active" data-sorting="by_vote">Most Voted</span> <i class="fas fa-sort-down"></i>
            <div class="wpdiscuz-sort-buttons"> <span class="wpdiscuz-sort-button wpdiscuz-date-sort-desc" data-sorting="newest">Newest</span> <span class="wpdiscuz-sort-button wpdiscuz-date-sort-asc" data-sorting="oldest">Oldest</span>
            </div>
           </div>
          </div>
         </div>
         <div class="wpd-comment-info-bar">
          <div class="wpd-current-view">
           <i class="fas fa-quote-left"></i> Inline Feedbacks
          </div>
          <div class="wpd-filter-view-all">
           View all comments
          </div>
         </div>
         <div class="wpd-thread-list">
          <div id="wpd-comm-1061616_0" class="wpd-comment wpd_comment_level-1">
           <div class="wpd-comment-wrap wpd-blog-guest">
            <div class="wpd-comment-left ">
             <div class="wpd-avatar "> 
             </div>
            </div>
            <div id="comment-1061616" class="wpd-comment-right">
             <div class="wpd-comment-header">
              <div class="wpd-comment-author ">
                Sasikumar
              </div>
              <div class="wpd-comment-date" title="June 21, 2021 11:02 pm"> <i class="far fa-clock" aria-hidden="true"></i> 3 months ago
              </div>
              <div class="wpd-space"></div>
              <div class="wpd-comment-link wpd-hidden">
               <div style="" class="comment_flag comment_flag_modal wc_flag_tooltipster wpf-cta wpd-field-desc" wpd-tooltip-position="left" id="fc_1061616" wpd-tooltip="Click to flag and open «Comment Reporting» form. You can choose reporting category and send message to website administrator. Admins may or may not choose to remove the comment or block the author. And please don" t worry, your report will be anonymous.'>
                <i class="fas fa-flag"></i>
               </div>
              </div>
             </div>
             <div class="wpd-comment-text">
              <p>Hi Dude,</p>
              <p>I have an issue while modifying XML file using Transformer API, XML declaration syntax after no new line appear. I have using open jdk 11 version. Kindly resolve the issue.</p>
             </div>
             <div class="wpd-comment-footer">
              <div class="wpd-vote">
               <div class="wpd-vote-up wpd_not_clicked"> 
                <svg xmlns="https://www.w3.org/2000/svg" viewbox="0 0 24 24">
                 <path fill="none" d="M0 0h24v24H0V0z" /><path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z" />
                </svg>
               </div>
               <div class="wpd-vote-result" title="0">
                0
               </div>
               <div class="wpd-vote-down wpd_not_clicked"> 
                <svg xmlns="https://www.w3.org/2000/svg" viewbox="0 0 24 24">
                 <path fill="none" d="M0 0h24v24H0z" /><path d="M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2zm4 0v12h4V3h-4z" />
                </svg>
               </div>
              </div>
              <div class="wpd-reply-button"> 
               <svg xmlns="https://www.w3.org/2000/svg" viewbox="0 0 24 24">
                <path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z" /><path d="M0 0h24v24H0z" fill="none" />
               </svg> <span>Reply</span>
              </div>
              <div class="wpd-space"></div>
             </div>
            </div>
           </div>
           <div id="wpdiscuz_form_anchor-1061616_0"></div>
          </div>
          <div class="wpdiscuz-comment-pagination"></div>
         </div>
        </div>
       </div>
      </div>
      <div id="wpdiscuz-loading-bar" class="wpdiscuz-loading-bar-unauth"></div>
      <div id="wpdiscuz-comment-message" class="wpdiscuz-comment-message-unauth"></div>
     </article>
    </main> <!-- right -->
    <div id="sidebar-right" class="d-none d-xl-block col-xl-3">
     <div class="ads-container-height1080">
      <div class="ads-container-sticky">
       <div class="ads-container">
        <div align="center" data-freestar-ad="__300x600" id="mkyong_rail_right_1">  
        </div>
       </div>
      </div>
     </div>
     <div class="ads-container-sticky">
      <div class="ads-container">
       <div align="center" data-freestar-ad="__300x600" id="mkyong_rail_right_2">  
       </div>
      </div>
     </div>
    </div>
   </div> <!--/.row -->
  </div> <!--/.container-fluid -->  <!-- Dynamic page generated in 0.078 seconds. --><!-- Cached page generated by WP-Super-Cache on 2021-09-29 17:33:56 -->
 </body>
</html>