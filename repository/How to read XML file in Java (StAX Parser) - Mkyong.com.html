<!doctype html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-site-verification" content="VsVvSTVAouAluNodWeR30BeIWTr4c84HvN4Fn9WBsak"> <!-- wp_head --> <!-- This site is optimized with the Yoast SEO plugin v15.5 - https://yoast.com/wordpress/plugins/seo/ -->
  <title>How to read XML file in Java (StAX Parser) - Mkyong.com</title>
  <meta name="description" content="Streaming API for XML (StAX) examples to read or parse an XML document, read XML elements, attributes, value, CDATA, etc. StAX Cursor API and Iterator API examples.">
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <meta property="og:locale" content="en_US">
  <meta property="og:type" content="article">
  <meta property="og:title" content="How to read XML file in Java (StAX Parser) - Mkyong.com">
  <meta property="og:description" content="Streaming API for XML (StAX) examples to read or parse an XML document, read XML elements, attributes, value, CDATA, etc. StAX Cursor API and Iterator API examples.">
  <meta property="og:url" content="https://mkyong.com/java/how-to-read-xml-file-in-java-stax-parser/">
  <meta property="og:site_name" content="Mkyong.com">
  <meta property="article:published_time" content="2021-04-28T10:05:36+00:00">
  <meta property="article:modified_time" content="2021-05-22T07:53:16+00:00">
  <meta property="og:image" content="https://mkyong.com/wp-content/uploads/2021/04/stax-cursor-api-events.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:label1" content="Written by">
  <meta name="twitter:data1" content="mkyong">
  <meta name="twitter:label2" content="Est. reading time">
  <meta name="twitter:data2" content="6 minutes">  <!-- / Yoast SEO plugin. -->  
 </head>
 <body>
  <div class="container-fluid">
   <div class="row"> <!-- left -->
    <div id="sidebar-left" class="col-12 col-lg-3 col-xl-2"> <!-- sidebar-left-menu, see functions.php-->
     <div class="offcanvas offcanvas-start" tabindex="-1" id="left-nav" aria-labelledby="left-nav">
      <div class="offcanvas-header">
       <h5 class="offcanvas-title">Java XML Tutorial</h5>
      </div>
      <div class="offcanvas-body sidebar-left-no-highlight">
       <div>
        <ul>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li class="active"></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
         <li></li>
        </ul>
       </div>
      </div>
     </div> <!-- ads -->
     <div class="ads-container-sticky d-none d-lg-block">
      <div class="ads-container">
       <div align="center" data-freestar-ad="__160x600" id="mkyong_rail_left">  
       </div>
      </div>
     </div>
    </div> <!-- middle -->
    <main id="main-middle" role="main" class="col-12 col-lg-9 col-xl-7">
     <article id="main-content" class="dont-break-out">
      <div id="title-container">
       <h1>How to read XML file in Java (StAX Parser)</h1>
       <div class="post-meta d-flex align-items-center position-relative">
        <div></div>
        <div>
         <p><small class="extra-info">By  | <time datetime="2021-05-22T15:53:16+08:00"> Last updated: May 22, 2021</time></small></p>
         <p><small class="extra-info">Viewed: 4,823 (+205 pv/w)</small></p>
         <p><small class="extra-info"></small></p>
         <div class="post-tag">
          <small class="extra-info">Tags: |  |  |  |  | </small>
         </div>
         <p></p>
        </div>
       </div>
      </div>
      <div class="pre-next-container d-flex justify-content-between"></div>
      <p>This tutorial shows how to use the  parser to read or parse an XML document.</p>
      <p>Table of contents</p>
      <ul class="list-toc">
       <li>
        <ul>
         <li></li>
        </ul></li>
       <li>
        <ul>
         <li></li>
         <li></li>
         <li></li>
        </ul></li>
       <li></li>
       <li></li>
       <li></li>
       <li></li>
       <li></li>
       <li></li>
      </ul>
      <div class="note">
       <p><strong>Note</strong><br> <em>P.S The Streaming API for XML (StAX) API is available since Java 1.6, a built-in JDK XML library.</em></p>
      </div>
      <p><em>P.S All below examples are tested with Java 11.</em></p>
      <h2 id="what-is-stax"> 1. What is StAX<br></h2>
      <p>The StAX stands for <code>Streaming API for XML (StAX)</code>, a <code>pull API</code> to work with the XML document.</p>
      <p>There are two programming models for working with the XML document, streaming and the document object model (DOM). For DOM models, we can use ; For streaming model, we can use  or StAX parser.</p>
      <h3 id="difference-between-sax-and-stax"> 1.1 Difference between SAX and StAX?<br></h3>
      <p>The <code>Simple API for XML (SAX)</code> is a <code>push API</code>; this SAX parser sends (push) the XML data to the client continuously. In SAX, the client has no control of when to receive the XML data.</p>
      <p>For example, we register a custom <code>DefaultHandler</code> implementation to process the XML data sent by the SAX parser. Read the .</p>
      <pre><code class="language-java">
  // SAX
  SAXParser saxParser = factory.newSAXParser();

  // DefaultHandler implementation
  PrintAllHandlerSax handler = new PrintAllHandlerSax();

  saxParser.parse(FILENAME, handler);
</code></pre>
      <p>The <code>Streaming API for XML (StAX)</code> is a <code>pull API</code>; the client calls methods on the StAX parser library to get (pull) the XML data one by one manually. In StAX, the client in control of when to get (pull) the XML data.</p>
      <pre><code class="language-java">
  // StAX Iterator API examples
  // next event
  XMLEvent event = xmlEventReader.nextEvent();

  // moves to next event
  event = xmlEventReader.nextEvent();

  // moves to next event
  event = xmlEventReader.nextEvent();
</code></pre>
      <p><em>Further Reading</em></p>
      <ul>
       <li></li>
      </ul>
      <div class="ads-container ads-container-video">
       <div id="mkyongFreeStarVideoAdContainer">
        <div id="freestar-video-parent">
         <div id="freestar-video-child"></div>
        </div>
       </div>
      </div>
      <h2 id="stax-cursor-api-and-iterator-api"> 2. StAX Cursor API and Iterator API<br></h2>
      <p>The StAX contains two API sets: a cursor API and an iterator API.</p>
      <h3 id="stax-cursor-api"> 2.1 StAX Cursor API<br></h3>
      <p>The StAX Cursor API contains two main interfaces <code>XMLStreamReader</code> and <code>XMLStreamWriter</code>. The <code>XMLStreamReader.getEventType()</code> will return a <code>int</code> and we need to map the event type manually.</p>
      <pre><code class="language-java">
  // StAX Cursor API
  XMLStreamReader reader = xmlInputFactory.createXMLStreamReader(
      new FileInputStream(path.toFile()));

  // this is int! we need to map the eventType manually
  int eventType = reader.getEventType();

  while (reader.hasNext()) {

      eventType = reader.next();

      if (eventType == XMLEvent.START_ELEMENT) {
      }
      //...
  }
</code></pre>
      <h3 id="stax-iterator-api"> 2.2 StAX Iterator API<br></h3>
      <p>The StAX Iterator API contains two main interfaces <code>XMLEventReader</code> and <code>XMLEventWriter</code>, and we work with the .</p>
      <pre><code class="language-java">
  // StAX Iterator API
  XMLEventReader reader = xmlInputFactory.createXMLEventReader(
      new FileInputStream(path.toFile()));

  // event iterator
  while (reader.hasNext()) {

      XMLEvent event = reader.nextEvent();

      if (event.isStartElement()) {
      }
      //...
  }
</code></pre>
      <h3 id="which-one-cursor-or-iterator-apis"> 2.3 which one? Cursor or Iterator APIs?<br></h3>
      <ul>
       <li>The Cursor API makes smaller and efficient code, also better performance compare to Iterator API. Suitable for high-performance applications or mobile apps.</li>
       <li>The Iterator API provides XML events, which are more flexible, extensible, and easy to code with, suitable for enterprise applications.</li>
      </ul>
      <p><em>Further Reading</em></p>
      <ul>
       <li></li>
      </ul>
      <h2 id="a-xml-file"> 3. A XML file<br></h2>
      <p>Below is an XML document, later we use the StAX parser to read the XML data and print it out.</p>
      <div class="filename">
       src/main/resources/staff.xml
      </div>
      <pre><code class="language-xml">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;Company&gt;
    &lt;staff id="1001"&gt;
        &lt;name&gt;mkyong&lt;/name&gt;
        &lt;role&gt;support&lt;/role&gt;
        &lt;salary currency="USD"&gt;5000&lt;/salary&gt;
        &lt;!-- for special characters like &lt; &amp;, need CDATA --&gt;
        &lt;bio&gt;&lt;![CDATA[HTML tag &lt;code&gt;testing&lt;/code&gt;]]&gt;&lt;/bio&gt;
    &lt;/staff&gt;
    &lt;staff id="1002"&gt;
        &lt;name&gt;yflow&lt;/name&gt;
        &lt;role&gt;admin&lt;/role&gt;
        &lt;salary currency="EUR"&gt;8000&lt;/salary&gt;
        &lt;bio&gt;&lt;![CDATA[a &amp; b]]&gt;&lt;/bio&gt;
    &lt;/staff&gt;
&lt;/Company&gt;
</code></pre>
      <h2 id="stax-cursor-api-to-read-a-xml-file"> 4. StAX Cursor API to read a XML file<br></h2>
      <p>The below example uses StAX Cursor API to read or parse the above XML file to get the XML elements, attributes, CDATA, etc.</p>
      <div class="filename">
       ReadXmlStAXCursorParser.java
      </div>
      <pre><code class="language-java">
package com.mkyong.xml.stax;

import javax.xml.stream.XMLInputFactory;
import javax.xml.stream.XMLStreamException;
import javax.xml.stream.XMLStreamReader;
import javax.xml.stream.events.XMLEvent;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.nio.file.Path;
import java.nio.file.Paths;

public class ReadXmlStAXCursorParser {

    private static final String FILENAME = "src/main/resources/staff.xml";

    public static void main(String[] args) {

        try {

            printXmlByXmlCursorReader(Paths.get(FILENAME));

        } catch (FileNotFoundException | XMLStreamException e) {
            e.printStackTrace();
        }

    }

    private static void printXmlByXmlCursorReader(Path path)
            throws FileNotFoundException, XMLStreamException {

        XMLInputFactory xmlInputFactory = XMLInputFactory.newInstance();
        XMLStreamReader reader = xmlInputFactory.createXMLStreamReader(
                new FileInputStream(path.toFile()));

        int eventType = reader.getEventType();
        System.out.println(eventType);   // 7, START_DOCUMENT
        System.out.println(reader);      // xerces

        while (reader.hasNext()) {

            eventType = reader.next();

            if (eventType == XMLEvent.START_ELEMENT) {

                switch (reader.getName().getLocalPart()) {

                    case "staff":
                        String id = reader.getAttributeValue(null, "id");
                        System.out.printf("Staff id : %s%n", id);
                        break;

                    case "name":
                        eventType = reader.next();
                        if (eventType == XMLEvent.CHARACTERS) {
                            System.out.printf("Name : %s%n", reader.getText());
                        }
                        break;

                    case "role":
                        eventType = reader.next();
                        if (eventType == XMLEvent.CHARACTERS) {
                            System.out.printf("Role : %s%n", reader.getText());
                        }
                        break;

                    case "salary":
                        String currency = reader.getAttributeValue(null, "currency");
                        eventType = reader.next();
                        if (eventType == XMLEvent.CHARACTERS) {
                            String salary = reader.getText();
                            System.out.printf("Salary [Currency] : %,.2f [%s]%n",
                              Float.parseFloat(salary), currency);
                        }
                        break;

                    case "bio":
                        eventType = reader.next();
                        if (eventType == XMLEvent.CHARACTERS) {
                            System.out.printf("Bio : %s%n", reader.getText());
                        }
                        break;
                }

            }

            if (eventType == XMLEvent.END_ELEMENT) {
                // if &lt;/staff&gt;
                if (reader.getName().getLocalPart().equals("staff")) {
                    System.out.printf("%n%s%n%n", "---");
                }
            }

        }

    }

}
</code></pre>
      <p>Output</p>
      <div class="filename">
       Terminal
      </div>
      <pre><code class="language-bash">
7
com.sun.org.apache.xerces.internal.impl.XMLStreamReaderImpl@18be83e4

Staff id : 1001
Name : mkyong
Role : support
Salary [Currency] : 5,000.00 [USD]
Bio : HTML tag &lt;code&gt;testing&lt;/code&gt;

---

Staff id : 1002
Name : yflow
Role : admin
Salary [Currency] : 8,000.00 [EUR]
Bio : a &amp; b

---
</code></pre>
      <p>Below is the code assistant for the Cursor API event type and its <code>int</code></p>
      <div class="pic"> 
      </div>
      <p></p>
      <h2 id="stax-iterator-api-to-read-a-xml-file"> 5. StAX Iterator API to read a XML file<br></h2>
      <p>The below example uses the StAX Iterator API to read or parse the above XML file to get the XML elements, attributes, CDATA, etc.</p>
      <div class="filename">
       ReadXmlStAXEventParser.java
      </div>
      <pre><code class="language-java">
package com.mkyong.xml.stax;

import javax.xml.namespace.QName;
import javax.xml.stream.XMLEventReader;
import javax.xml.stream.XMLInputFactory;
import javax.xml.stream.XMLStreamException;
import javax.xml.stream.events.Attribute;
import javax.xml.stream.events.EndElement;
import javax.xml.stream.events.StartElement;
import javax.xml.stream.events.XMLEvent;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.nio.file.Path;
import java.nio.file.Paths;

public class ReadXmlStAXEventParser {

    private static final String FILENAME = "src/main/resources/staff.xml";

    public static void main(String[] args) {

        try {

            printXmlByXmlEventReader(Paths.get(FILENAME));

        } catch (FileNotFoundException | XMLStreamException e) {
            e.printStackTrace();
        }

    }

    private static void printXmlByXmlEventReader(Path path)
            throws FileNotFoundException, XMLStreamException {

        XMLInputFactory xmlInputFactory = XMLInputFactory.newInstance();
        XMLEventReader reader = xmlInputFactory.createXMLEventReader(
                new FileInputStream(path.toFile()));

        // event iterator
        while (reader.hasNext()) {

            XMLEvent event = reader.nextEvent();

            if (event.isStartElement()) {

                StartElement element = event.asStartElement();

                switch (element.getName().getLocalPart()) {
                    // if &lt;staff&gt;
                    case "staff":
                        // id='1001'
                        Attribute id = element.getAttributeByName(new QName("id"));
                        System.out.printf("Staff id : %s%n", id.getValue());
                        break;
                    case "name":
                        // throws StartElementEvent cannot be cast to class javax.xml.stream.events.Characters
                        // element.asCharacters().getData()

                        // this is still '&lt;name&gt;' tag, need move to next event for the character data
                        event = reader.nextEvent();
                        if (event.isCharacters()) {
                            System.out.printf("Name : %s%n", event.asCharacters().getData());
                        }
                        break;
                    case "role":
                        event = reader.nextEvent();
                        if (event.isCharacters()) {
                            System.out.printf("Role : %s%n", event.asCharacters().getData());
                        }
                        break;
                    case "salary":
                        // currency='USD'
                        Attribute currency = element.getAttributeByName(new QName("currency"));
                        event = reader.nextEvent();
                        if (event.isCharacters()) {
                            String salary = event.asCharacters().getData();
                            System.out.printf("Salary [Currency] : %,.2f [%s]%n",
                              Float.parseFloat(salary), currency);
                        }
                        break;
                    case "bio":
                        event = reader.nextEvent();
                        if (event.isCharacters()) {
                            // CDATA, no problem.
                            System.out.printf("Bio : %s%n", event.asCharacters().getData());
                        }
                        break;
                }
            }

            if (event.isEndElement()) {
                EndElement endElement = event.asEndElement();
                // if &lt;/staff&gt;
                if (endElement.getName().getLocalPart().equals("staff")) {
                    System.out.printf("%n%s%n%n", "---");
                }
            }

        }

    }

}
</code></pre>
      <p>Output</p>
      <div class="filename">
       Terminal
      </div>
      <pre><code class="language-bash">
Staff id : 1001
Name : mkyong
Role : support
Salary [Currency] : 5,000.00 [currency='USD']
Bio : HTML tag &lt;code&gt;testing&lt;/code&gt;

---

Staff id : 1002
Name : yflow
Role : admin
Salary [Currency] : 8,000.00 [currency='EUR']
Bio : a &amp; b

---
</code></pre>
      <h2 id="convert-xml-to-java-objects"> 6. Convert XML to Java objects?<br></h2>
      <p>Yes, we can use the StAX API to convert XML to Java objects. For the above example, we already can get the XML data, create a POJO like <code>Staff.java</code> and set the value manually.</p>
      <p>The  is a recommended library to convert XML to/from Java objects.</p>
      <h2 id="download-source-code"> 7. Download Source Code<br></h2>
      <div class="github">
       <p>$ git clone </p>
       <p>$ cd java-xml</p>
       <p>$ cd src/main/java/com/mkyong/xml/stax/</p>
      </div>
      <h2 id="references"> 8. References<br></h2>
      <ul>
       <li></li>
       <li></li>
       <li></li>
       <li></li>
       <li></li>
       <li></li>
       <li></li>
       <li></li>
       <li></li>
      </ul>
      <div class="pre-next-container d-flex justify-content-between"></div> <!-- current post ID --> 
      <div class="d-flex justify-content-center ads-container-after-post ads-container"> <!-- Tag ID: mkyong_leaderboard_btf -->
       <div align="center" data-freestar-ad="__320x100 __336x280" id="mkyong_leaderboard_btf">  
       </div>
      </div> <!-- loaded via JS -->
      <div id="mk-afterpost-related"></div> <!-- author -->
      <div id="author-container" class="d-flex align-items-center position-relative">
       <div></div>
       <div>
        <h5></h5>
        <p>Founder of , love Java and open source stuff. Follow him on . If you like my tutorials, consider make a donation to .</p>
        <p></p>
       </div>
      </div> <!-- comments -->
      <h4>Comments</h4>
      <div class="wpdiscuz_top_clearing"></div>
      <div id="comments" class="comments-area">
       <div id="respond" style="width: 0;height: 0;clear: both;margin: 0;padding: 0;"></div>
       <div id="wpdcom" class="wpdiscuz_unauth wpd-default wpd-layout-1 wpd-comments-open">
        <div class="wc_social_plugin_wrapper"></div>
        <div class="wpd-form-wrap">
         <div class="wpd-form-head">
          <div class="wpd-auth">
           <div class="wpd-login"></div>
          </div>
         </div>
         <div class="wpd-form wpd-form-wrapper wpd-main-form-wrapper" id="wpd-main-form-wrapper-0_0"></div>
         <div id="wpdiscuz_hidden_secondary_form" style="display: none;">
          <div class="wpd-form wpd-form-wrapper wpd-secondary-form-wrapper" id="wpd-secondary-form-wrapper-wpdiscuzuniqueid" style="display: none;">
           <div class="wpd-secondary-forms-social-content"></div>
           <div class="clearfix"></div>
          </div>
         </div>
        </div>
        <div id="wpd-threads" class="wpd-thread-wrapper">
         <div class="wpd-thread-head">
          <div class="wpd-thread-info " data-comments-count="0"> <span class="wpdtc" title="0">0</span> Comments
          </div>
          <div class="wpd-space"></div>
          <div class="wpd-thread-filter"></div>
         </div>
         <div class="wpd-comment-info-bar">
          <div class="wpd-current-view">
           <i class="fas fa-quote-left"></i> Inline Feedbacks
          </div>
          <div class="wpd-filter-view-all">
           View all comments
          </div>
         </div>
         <div class="wpd-thread-list">
          <div class="wpdiscuz-comment-pagination"></div>
         </div>
        </div>
       </div>
      </div>
      <div id="wpdiscuz-loading-bar" class="wpdiscuz-loading-bar-unauth"></div>
      <div id="wpdiscuz-comment-message" class="wpdiscuz-comment-message-unauth"></div>
     </article>
    </main> <!-- right -->
    <div id="sidebar-right" class="d-none d-xl-block col-xl-3">
     <div class="ads-container-height1080">
      <div class="ads-container-sticky">
       <div class="ads-container">
        <div align="center" data-freestar-ad="__300x600" id="mkyong_rail_right_1">  
        </div>
       </div>
      </div>
     </div>
     <div class="ads-container-sticky">
      <div class="ads-container">
       <div align="center" data-freestar-ad="__300x600" id="mkyong_rail_right_2">  
       </div>
      </div>
     </div>
    </div>
   </div> <!--/.row -->
  </div> <!--/.container-fluid -->  <!-- Dynamic page generated in 0.079 seconds. --><!-- Cached page generated by WP-Super-Cache on 2021-09-29 17:39:54 -->
 </body>
</html>